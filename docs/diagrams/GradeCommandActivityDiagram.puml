@startuml
skin rose
skinparam ActivityFontSize 15
skinparam ArrowFontSize 12
start
:User enters command to add/update grades;
:Logic parses index and grade triplets;
:Validate each grade triplet format;
if () then ([has duplicates])
  :Display duplicate grade error;
  stop
else ([no duplicates])
  :Create and execute GradeCommand;
endif
if () then ([invalid index])
  :Display invalid index error;
  stop
else ([valid index])
  :Retrieve target person;
endif
:Add or update each grade in grade list;
:Update person with new grade list;
:Update filtered list;
:Display success to user;
stop
@enduml

